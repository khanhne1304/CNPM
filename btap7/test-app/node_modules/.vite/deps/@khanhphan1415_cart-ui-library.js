import {
  require_jsx_runtime
} from "./chunk-2AK5II3W.js";
import {
  __toESM,
  require_react
} from "./chunk-2WHLTL63.js";

// node_modules/@khanhphan1415/cart-ui-library/dist/index.js
var import_jsx_runtime = __toESM(require_jsx_runtime());
var import_jsx_runtime2 = __toESM(require_jsx_runtime());
var import_jsx_runtime3 = __toESM(require_jsx_runtime());
var import_jsx_runtime4 = __toESM(require_jsx_runtime());
var import_react = __toESM(require_react());
var import_jsx_runtime5 = __toESM(require_jsx_runtime());
var import_react2 = __toESM(require_react());
var import_jsx_runtime6 = __toESM(require_jsx_runtime());
var Button = ({
  children,
  onClick,
  disabled,
  variant = "primary",
  className,
  type = "button"
}) => {
  const bg = variant === "primary" ? "#0070f3" : variant === "secondary" ? "#eaeaea" : "#ff4d4f";
  const color = variant === "secondary" ? "#000" : "#fff";
  return (0, import_jsx_runtime.jsx)(
    "button",
    {
      type,
      onClick,
      disabled,
      className,
      style: {
        padding: "8px 16px",
        borderRadius: 8,
        background: disabled ? "#c0c0c0" : bg,
        color,
        border: "none",
        cursor: disabled ? "not-allowed" : "pointer",
        fontWeight: 600
      },
      children
    }
  );
};
var InputText = ({
  value,
  onChange,
  placeholder,
  className,
  type = "text",
  min,
  max
}) => {
  const handle = (e) => onChange(e.target.value);
  return (0, import_jsx_runtime2.jsx)(
    "input",
    {
      value,
      onChange: handle,
      placeholder,
      type,
      min,
      max,
      className,
      style: {
        padding: "8px 10px",
        border: "1px solid #d0d0d0",
        borderRadius: 6,
        width: "100%"
      }
    }
  );
};
var Modal = ({
  isOpen,
  onClose,
  title,
  children,
  footer
}) => {
  if (!isOpen) return null;
  return (0, import_jsx_runtime3.jsx)(
    "div",
    {
      style: {
        position: "fixed",
        inset: 0,
        background: "rgba(0,0,0,0.45)",
        display: "flex",
        alignItems: "center",
        justifyContent: "center",
        zIndex: 9999
      },
      role: "dialog",
      "aria-modal": "true",
      children: (0, import_jsx_runtime3.jsxs)(
        "div",
        {
          style: {
            width: "min(92vw, 640px)",
            background: "#fff",
            borderRadius: 10,
            boxShadow: "0 8px 34px rgba(0,0,0,0.15)",
            overflow: "hidden"
          },
          children: [
            (0, import_jsx_runtime3.jsxs)("div", { style: { padding: "12px 16px", borderBottom: "1px solid #eee", display: "flex", alignItems: "center", justifyContent: "space-between" }, children: [
              (0, import_jsx_runtime3.jsx)("strong", { children: title }),
              (0, import_jsx_runtime3.jsx)(Button, { variant: "secondary", onClick: onClose, children: "ƒê√≥ng" })
            ] }),
            (0, import_jsx_runtime3.jsx)("div", { style: { padding: 16 }, children }),
            (0, import_jsx_runtime3.jsx)("div", { style: { padding: 12, borderTop: "1px solid #eee", display: "flex", gap: 8, justifyContent: "flex-end" }, children: footer })
          ]
        }
      )
    }
  );
};
var Card = ({ title, children, className }) => {
  return (0, import_jsx_runtime4.jsxs)(
    "div",
    {
      className,
      style: {
        border: "1px solid #eee",
        borderRadius: 10,
        padding: 16,
        boxShadow: "0 2px 10px rgba(0,0,0,0.04)",
        background: "#fff"
      },
      children: [
        title && (0, import_jsx_runtime4.jsx)("h3", { style: { marginTop: 0 }, children: title }),
        children
      ]
    }
  );
};
var initialState = { items: [] };
function cartReducer(state, action) {
  switch (action.type) {
    case "ADD": {
      const exists = state.items.find((i) => i.id === action.item.id);
      if (exists) {
        return {
          items: state.items.map(
            (i) => i.id === action.item.id ? { ...i, quantity: i.quantity + action.item.quantity } : i
          )
        };
      }
      return { items: [...state.items, action.item] };
    }
    case "REMOVE":
      return { items: state.items.filter((i) => i.id !== action.id) };
    case "UPDATE":
      return {
        items: state.items.map(
          (i) => i.id === action.id ? { ...i, quantity: Math.max(0, action.quantity) } : i
        ).filter((i) => i.quantity > 0)
      };
    case "CLEAR":
      return { items: [] };
    default:
      return state;
  }
}
var CartContext = (0, import_react.createContext)(null);
function CartProvider({
  children,
  persistKey
}) {
  const [state, dispatch] = (0, import_react.useReducer)(cartReducer, initialState, (init) => {
    if (typeof window !== "undefined" && persistKey) {
      try {
        const raw = window.localStorage.getItem(persistKey);
        if (raw) return JSON.parse(raw);
      } catch {
      }
    }
    return init;
  });
  const value = (0, import_react.useMemo)(() => {
    const add = (item) => dispatch({ type: "ADD", item });
    const remove = (id) => dispatch({ type: "REMOVE", id });
    const update = (id, quantity) => dispatch({ type: "UPDATE", id, quantity });
    const clear = () => dispatch({ type: "CLEAR" });
    const totalItems = state.items.reduce(
      (s, i) => s + i.quantity,
      0
    );
    const subtotal = state.items.reduce(
      (s, i) => s + i.quantity * i.price,
      0
    );
    return { state, add, remove, update, clear, totalItems, subtotal };
  }, [state]);
  if (typeof window !== "undefined" && persistKey) {
    try {
      window.localStorage.setItem(persistKey, JSON.stringify(state));
    } catch {
    }
  }
  return (0, import_jsx_runtime5.jsx)(CartContext.Provider, { value, children });
}
function useCart() {
  const ctx = (0, import_react.useContext)(CartContext);
  if (!ctx) throw new Error("useCart must be used within <CartProvider>");
  return ctx;
}
function CartItemRow({ id, name, price, quantity, image }) {
  const { update, remove } = useCart();
  return (0, import_jsx_runtime6.jsxs)("div", { style: { display: "grid", gridTemplateColumns: "56px 1fr auto auto", gap: 12, alignItems: "center" }, children: [
    (0, import_jsx_runtime6.jsx)("img", { src: image || "https://via.placeholder.com/56", alt: name, width: 56, height: 56, style: { borderRadius: 6, objectFit: "cover" } }),
    (0, import_jsx_runtime6.jsxs)("div", { children: [
      (0, import_jsx_runtime6.jsx)("div", { style: { fontWeight: 600 }, children: name }),
      (0, import_jsx_runtime6.jsxs)("small", { children: [
        price.toLocaleString(),
        " ƒë"
      ] })
    ] }),
    (0, import_jsx_runtime6.jsx)("div", { style: { width: 100 }, children: (0, import_jsx_runtime6.jsx)(
      InputText,
      {
        type: "number",
        value: quantity,
        min: 0,
        onChange: (val) => {
          const q = Number(val || 0);
          update(id, Number.isFinite(q) ? q : 0);
        }
      }
    ) }),
    (0, import_jsx_runtime6.jsx)("div", { style: { justifySelf: "end" }, children: (0, import_jsx_runtime6.jsx)(Button, { variant: "danger", onClick: () => remove(id), children: "Xo√°" }) })
  ] });
}
function CartPanel() {
  const { state, subtotal, totalItems, clear } = useCart();
  return (0, import_jsx_runtime6.jsxs)(Card, { title: "Gi·ªè h√†ng", children: [
    (0, import_jsx_runtime6.jsxs)("div", { style: { display: "flex", flexDirection: "column", gap: 12 }, children: [
      state.items.length === 0 && (0, import_jsx_runtime6.jsx)("div", { children: "Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o." }),
      state.items.map((i) => (0, import_jsx_runtime6.jsx)(CartItemRow, { id: i.id, name: i.name, price: i.price, quantity: i.quantity, image: i.image }, i.id))
    ] }),
    (0, import_jsx_runtime6.jsx)("hr", { style: { margin: "16px 0" } }),
    (0, import_jsx_runtime6.jsxs)("div", { style: { display: "flex", justifyContent: "space-between", fontWeight: 600 }, children: [
      (0, import_jsx_runtime6.jsx)("span", { children: "T·ªïng s·ªë l∆∞·ª£ng:" }),
      (0, import_jsx_runtime6.jsx)("span", { children: totalItems })
    ] }),
    (0, import_jsx_runtime6.jsxs)("div", { style: { display: "flex", justifyContent: "space-between", fontWeight: 700, fontSize: 18 }, children: [
      (0, import_jsx_runtime6.jsx)("span", { children: "T·∫°m t√≠nh:" }),
      (0, import_jsx_runtime6.jsxs)("span", { children: [
        subtotal.toLocaleString(),
        " ƒë"
      ] })
    ] }),
    (0, import_jsx_runtime6.jsxs)("div", { style: { display: "flex", gap: 8, marginTop: 12 }, children: [
      (0, import_jsx_runtime6.jsx)(Button, { variant: "secondary", onClick: clear, children: "L√†m tr·ªëng" }),
      (0, import_jsx_runtime6.jsx)(Button, { children: "Thanh to√°n" })
    ] })
  ] });
}
function CartModalButton() {
  const [open, setOpen] = import_react2.default.useState(false);
  const { totalItems } = useCart();
  return (0, import_jsx_runtime6.jsxs)(import_jsx_runtime6.Fragment, { children: [
    (0, import_jsx_runtime6.jsxs)(Button, { onClick: () => setOpen(true), children: [
      "üõí Gi·ªè h√†ng (",
      totalItems,
      ")"
    ] }),
    (0, import_jsx_runtime6.jsx)(Modal, { isOpen: open, onClose: () => setOpen(false), title: "Gi·ªè h√†ng", children: (0, import_jsx_runtime6.jsx)(CartPanel, {}) })
  ] });
}
function AddToCartButton({ id, name, price, image }) {
  const { add } = useCart();
  return (0, import_jsx_runtime6.jsx)(Button, { onClick: () => add({ id, name, price, quantity: 1, image }), children: "Th√™m v√†o gi·ªè" });
}
export {
  AddToCartButton,
  Button,
  Card,
  CartModalButton,
  CartPanel,
  CartProvider,
  InputText,
  Modal,
  useCart
};
//# sourceMappingURL=@khanhphan1415_cart-ui-library.js.map
